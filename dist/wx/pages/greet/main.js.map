require("../../common/manifest.js.map")
require("../../common/vendor.js.map")
{"version":3,"sources":["webpack:///./src/pages/greet/main.js","webpack:///./src/pages/greet/index.vue","webpack:///./src/pages/greet/index.vue?c74a","webpack:///src/pages/greet/index.vue","webpack:///./src/pages/greet/index.vue?a80a"],"names":["app","Vue","App","$mount"],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA,IAAMA,MAAM,IAAIC,2CAAJ,CAAQC,uDAAR,CAAZ;AACAF,IAAIG,MAAJ,G;;;;;;;ACJA;AAAA;AAAA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,EAA4f;AACtgB;AACA,yBAAyB,mBAAO,CAAC,CAA8D;AAC/F;AAC2H;AAC3H;AACqa;AACra;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,mIAAc;AAChB,EAAE,wUAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAEc,0EAAiB;;;;;;;AC3ChC,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqBA;AACA;AACA,eADA;AAEA,MAFA,kBAEA;AACA;AACA,kBADA;AAEA,gBAFA;AAGA;AAHA;AAKA,GARA;AASA,QATA,oBASA;AACA;AACA;AACA,GAZA;;AAaA;AACA,aADA,qBACA,CADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA,KAXA;AAaA,WAbA,qBAaA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AADA,SAIA,IAJA,CAIA;AACA;AACA,OANA;AAOA,KAxBA;AA0BA,aA1BA,uBA0BA;AACA;AACA;AACA,oBADA;AAEA;AAFA,SAGA,IAHA,CAGA;AACA;AACA;AACA,OANA;AAOA,KAnCA;AAqCA,cArCA,wBAqCA;AACA;AACA;AACA;AACA;AACA;AADA,SAEA,GAFA,GAEA,IAFA,CAEA;AACA;AACA;AACA,SAFA,MAEA;AACA,UAAU,kEAAK,CAAf;AACA;AACA,OARA;AASA,KAlDA;AAoDA,eApDA,yBAoDA;AACA;AACA;AACA,wBADA;AAEA;AAFA,SAGA,IAHA,CAGA;AACA;AACA,OALA;AAMA;AA5DA;AAbA,G;;;;;;;ACtBA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACF,kEAAS;AACxB,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C","file":"pages\\greet\\main.js","sourcesContent":["import Vue from 'vue'\nimport App from './index'\n\nconst app = new Vue(App)\napp.$mount()\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/greet/main.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-03989fe2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!stylus-loader?{\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-03989fe2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"fileExt\\\":{\\\"template\\\":\\\"wxml\\\",\\\"script\\\":\\\"js\\\",\\\"style\\\":\\\"wxss\\\",\\\"platform\\\":\\\"wx\\\"}}!../../../node_modules/mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-03989fe2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\pages\\\\greet\\\\index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-03989fe2\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-03989fe2\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/greet/index.vue\n// module id = 10\n// module chunks = 5","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-03989fe2\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/postcss-loader/lib?{\"sourceMap\":true}!./node_modules/stylus-loader?{\"sourceMap\":false}!./node_modules/mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/greet/index.vue\n// module id = 11\n// module chunks = 5","<template>\n    <div class=\"greet\">\n        <image class=\"head\" src=\"../../static/images/heart-animation.gif\"/>\n        <scroll-view\n            scroll-y\n            class=\"box\"\n        >\n            <div class=\"item\" v-for=\"(item, index) in userList\" :key=\"index\">\n                <image :src=\"item.user.avatarUrl\"/>\n                <p>{{item.user.nickName}}</p>\n            </div>\n        </scroll-view>\n        <p class=\"count\">已收到{{userList.length}}位好友送来的祝福</p>\n        <div class=\"bottom\">\n            <button class=\"left\" lang=\"zh_CN\" open-type=\"getUserInfo\" @getuserinfo=\"sendGreet\">送上祝福</button>\n            <button class=\"right\" open-type=\"share\">分享喜悦</button> \n        </div>\n    </div>\n</template>\n\n<script>\nimport tools from 'common/js/h_tools'\nexport default {\n  name: 'Greet',\n  data () {\n    return {\n      userList: [],\n      openId: '',\n      userInfo: ''\n    }\n  },\n  onShow () {\n    const that = this\n    that.getUserList()\n  },\n  methods: {\n    sendGreet (e) {\n      const that = this\n      if (e.target.errMsg === 'getUserInfo:ok') {\n        wx.getUserInfo({\n          success: function (res) {\n            that.userInfo = res.userInfo\n            that.getOpenId()\n          }\n        })\n      }\n    },\n\n    addUser () {\n      const that = this\n      const db = wx.cloud.database()\n      const user = db.collection('user')\n      user.add({\n        data: {\n          user: that.userInfo\n        }\n      }).then(res => {\n        that.getUserList()\n      })\n    },\n\n    getOpenId () {\n      const that = this\n      wx.cloud.callFunction({\n        name: 'user',\n        data: {}\n      }).then(res => {\n        that.openId = res.result.openid\n        that.getIsExist()\n      })\n    },\n\n    getIsExist () {\n      const that = this\n      const db = wx.cloud.database()\n      const user = db.collection('user')\n      user.where({\n        _openid: that.openId\n      }).get().then(res => {\n        if (res.data.length === 0) {\n          that.addUser()\n        } else {\n          tools.showToast('您已经送过祝福了~')\n        }\n      })\n    },\n\n    getUserList () {\n      const that = this\n      wx.cloud.callFunction({\n        name: 'userList',\n        data: {}\n      }).then(res => {\n        that.userList = res.result.data.reverse()\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.greet\n    width 100%\n    height 100%\n    .head\n        height 150rpx\n        width 200rpx\n        margin 0 auto\n    .box\n        height 700rpx\n        width 690rpx\n        margin-left 30rpx\n        border-radius 16rpx\n        box-shadow 0 0 10rpx rgba(0, 0, 0, 0.1)\n        display flex\n        justify-content flex-start\n        align-items flex-start\n        flex-wrap wrap\n        .item\n            width 120rpx\n            display flex\n            flex-direction column\n            justify-content flex-start\n            align-items center\n            padding 25rpx\n            float left\n            image\n                width 100rpx\n                height 100rpx\n                border-radius 50rpx\n            p\n                height 50rpx\n                line-height 50rpx\n                font-size 24rpx\n                color #444\n                width 100rpx\n                overflow hidden\n                text-overflow ellipsis\n                white-space nowrap\n                text-align center\n    .bottom\n        height 140rpx\n        position fixed\n        bottom 0\n        left 0\n        background rgba(255, 255, 255, 0.5)\n        display flex\n        justify-content center\n        align-items center\n        width 100%\n        .left\n            height 80rpx\n            line-height 80rpx\n            font-size 28rpx\n            width 300rpx\n            color #fff\n            background #E62C6B\n            margin-right 20rpx\n        .right\n            height 80rpx\n            line-height 80rpx\n            font-size 28rpx\n            color #fff\n            width 300rpx\n            background #2CA6F9\n    .count\n        height 60rpx\n        line-height 60rpx\n        background rgba(255, 255, 255, 0.5)\n        position fixed\n        bottom 140rpx\n        left 0\n        font-size 28rpx\n        color #444\n        text-align center\n        width 100%\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/greet/index.vue?985a43de","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"greet\"\n  }, [_c('image', {\n    staticClass: \"head\",\n    attrs: {\n      \"src\": \"../../static/images/heart-animation.gif\"\n    }\n  }), _vm._v(\" \"), _c('scroll-view', {\n    staticClass: \"box\",\n    attrs: {\n      \"scroll-y\": \"\"\n    }\n  }, _vm._l((_vm.userList), function(item, index) {\n    return _c('div', {\n      key: index,\n      staticClass: \"item\"\n    }, [_c('image', {\n      attrs: {\n        \"src\": item.user.avatarUrl\n      }\n    }), _vm._v(\" \"), _c('p', [_vm._v(_vm._s(item.user.nickName))])], 1)\n  })), _vm._v(\" \"), _c('p', {\n    staticClass: \"count\"\n  }, [_vm._v(\"已收到\" + _vm._s(_vm.userList.length) + \"位好友送来的祝福\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"bottom\"\n  }, [_c('button', {\n    staticClass: \"left\",\n    attrs: {\n      \"lang\": \"zh_CN\",\n      \"open-type\": \"getUserInfo\",\n      \"eventid\": '2_0'\n    },\n    on: {\n      \"getuserinfo\": _vm.sendGreet\n    }\n  }, [_vm._v(\"送上祝福\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"right\",\n    attrs: {\n      \"open-type\": \"share\"\n    }\n  }, [_vm._v(\"分享喜悦\")])], 1)], 1)\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-03989fe2\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mpvue-loader/lib/template-compiler?{\"id\":\"data-v-03989fe2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"fileExt\":{\"template\":\"wxml\",\"script\":\"js\",\"style\":\"wxss\",\"platform\":\"wx\"}}!./node_modules/mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/greet/index.vue\n// module id = 13\n// module chunks = 5"],"sourceRoot":""}